<ng-template
  #formError
  let-control="control"
  let-message="message"
  let-validation="validation"
>
  <ng-container
    *ngIf="control.hasError(validation) && (control.dirty || control.touched)"
  >
    <div class="fv-plugins-message-container">
      <span role="alert" class="custom-alert">
        {{ message }}
      </span>
    </div>
  </ng-container>
</ng-template>

<!--begin Root-->
<div class="root d-flex flex-column flex-center" id="kt_app_root">
  <!--begin Page bg image-->
  <!--end Page bg image-->
  <!--begin Authentication - Sign-in -->
  <div class="d-flex flex-column flex-lg-row flex-column-fluid">
    <!--begin Aside-->
    <div class="d-flex flex-lg-row-fluid">
      <!--begin Content-->
      <div class="d-flex flex-column flex-center pb-0 pb-lg-10 p-10 w-100">
        <!--begin Image-->
        <img
          class="theme-light-show mx-auto mw-100 w-150px w-lg-300px mb-10 mb-lg-20"
          src="assets/media/auth/agency.png"
          alt=""
        />
        <img
          class="theme-dark-show mx-auto mw-100 w-150px w-lg-300px mb-10 mb-lg-20"
          src="assets/media/auth/agency-dark.png"
          alt=""
        />

        <!--end Image-->
        <!--begin Title-->
        <h1 class="text-gray-800 fs-2qx fw-bold text-center mb-7">
          Ministère de l'Intégration africaine et des Affaires étrangères
        </h1>
        <!--end Title-->
        <!--begin Text-->
        <div class="fs-base text-center fw-semibold">
          Bienvenue sur notre plateforme d’enregistrement consulaire en ligne !
          <br />
          Notre mission est de faciliter l’acquisition de la carte consulaire
          pour les Sénégalais résidant à l’étranger.
        </div>
        <!--end Text-->
      </div>
      <!--end Content-->
    </div>
    <!--begin Aside-->
    <!--begin Body-->
    <div
      class="d-flex flex-column-fluid flex-lg-row-auto justify-content-center justify-content-lg-end p-12"
    >
      <!--begin Wrapper-->
      <div
        class="bg-body d-flex flex-column flex-center rounded-4 w-md-600px p-10"
      >
        <!--begin Content-->
        <div
          class="d-flex flex-center flex-column align-items-stretch h-lg-100 w-md-400px"
        >
          <!--begin Wrapper-->
          <div
            class="d-flex flex-center flex-column flex-column-fluid pb-15 pb-lg-20"
          >
            <!--begin Form-->
            <form
              class="form w-100"
              novalidate="novalidate"
              [formGroup]="loginForm"
              id="kt_login_signin_form"
              (ngSubmit)="login()"
            >
              <!--begin Heading-->
              <!--begin logo-->
              <div class="w-100 mb-10 mb-lg-20 text-center">
                <img
                  alt="Logo"
                  src="assets/media/auth/logo.jpg"
                  class="w-100"
                  style="max-width: 350px"
                />
              </div>
              <div class="text-center mb-11">
                <!--begin Title-->
                <h1 class="text-gray-900 fw-bolder mb-3">Connexion</h1>
                <!--end Title-->
              </div>
              <!-- end logo -->
              <!--begin alert-->
              <ng-container *ngIf="hasError">
                <div class="mb-lg-15 alert alert-danger">
                  <div class="alert-text font-weight-bold">
                    Les informations de connexion sont incorrectes
                  </div>
                </div>
              </ng-container>
              <!-- end Alert error-->
              <!--begin Input group-->
              <div class="fv-row mb-8">
                <label class="form-label fs-6 fw-bolder text-gray-900"
                  >Email</label
                >
                <!--begin Email-->
                <input
                  type="text"
                  placeholder="Email"
                  [(ngModel)]="email"
                  formControlName="email"
                  autocomplete="off"
                  [ngClass]="{
                    'is-invalid': loginForm.controls['email'].invalid,
                    'is-valid': loginForm.controls['email'].valid
                  }"
                  class="form-control bg-transparent w-100"
                  style="min-width: 300px"
                />
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'required',
                    message: 'L\'email est requis',
                    control: loginForm.controls['email']
                  }"
                ></ng-container>
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'email',
                    message: 'Le format de l\'email est invalide',
                    control: loginForm.controls['email']
                  }"
                ></ng-container>
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'minLength',
                    message: 'L\'email doit avoir au minimum 3 caractères',
                    control: loginForm.controls['email']
                  }"
                ></ng-container>
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'maxLength',
                    message: 'L\'email ne doit pas dépasser 360 caractères',
                    control: loginForm.controls['email']
                  }"
                ></ng-container>
                <!--end Email-->
              </div>
              <!--end Input group-->
              <div class="fv-row mb-3">
                <label class="form-label fw-bolder text-gray-900 fs-6 mb-0"
                  >Mot de passe</label
                >
                <!--begin Password-->
                <input
                  type="password"
                  placeholder="Password"
                  [(ngModel)]="password"
                  autocomplete="off"
                  formControlName="password"
                  [ngClass]="{
                    'is-invalid': loginForm.controls['password'].invalid,
                    'is-valid': loginForm.controls['password'].valid
                  }"
                  class="form-control bg-transparent w-100"
                  style="min-width: 300px"
                />
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'required',
                    message: 'Le mot de passe est requis',
                    control: loginForm.controls['password']
                  }"
                ></ng-container>
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'minlength',
                    message: 'Le mot de passe doit avoir au moins 3 caractères',
                    control: loginForm.controls['password']
                  }"
                ></ng-container>
                <ng-container
                  [ngTemplateOutlet]="formError"
                  [ngTemplateOutletContext]="{
                    validation: 'maxLength',
                    message:
                      'Le mot de passe ne doit pas dépasser 100 caractères',
                    control: loginForm.controls['password']
                  }"
                ></ng-container>
                <!--end Password-->
              </div>
              <!--end Input group-->
              <!--begin Wrapper-->
              <div
                class="d-flex flex-stack flex-wrap gap-3 fs-base fw-semibold mb-8"
              >
                <div></div>
              </div>
              <!--end Wrapper-->
              <!--begin Submit button-->
              <div class="d-grid mb-10">
                <button
                  type="submit"
                  [disabled]="loginForm.invalid"
                  id="kt_sign_in_submit"
                  class="btn btn-primary"
                >
                  <!--begin Indicator label-->
                  <span class="indicator-label">Se connecter</span>
                  <!--end Indicator label-->
                  <!--begin Indicator progress-->
                  <span class="indicator-progress">
                    Please wait...
                    <span
                      class="spinner-border spinner-border-sm align-middle ms-2"
                    ></span>
                  </span>
                  <!--end Indicator progress-->
                </button>
              </div>
              <!--end Submit button-->
            </form>
            <!--end Form-->
          </div>
          <!--end Wrapper-->
        </div>
        <!--end Content-->
      </div>
      <!--end Wrapper-->
    </div>
    <!--end Body-->
  </div>
  <!--end Authentication - Sign-in-->
</div>
